
# 实现线程安全的队列的

## 队列用于存放多个元素，是存放各种元素的池，这个元素可以是线程，可以是任务等等

### 队列可能有多个线程同时操作， 因此需要保证线程安全
    - 保证多个线程获取的串行， 借助“锁”来保护队列
### 队列元素为空时获取队列元素
    - 阻塞，等待队列不为空，  借助条件变量等待队列元素

- 实现线程安全的队列
    - 获取当前队列元素的数量
    - 往队列放入元素
    - 从队列取出元素

# 实现基本任务对象Task

## 实现基本任务对象
    - 任务参数
    - 任务唯一标记
    - 任务具体的执行逻辑

# 线程池简介

## 什么是线程池
    - 存放多个线程的容器
    - CPU调度线程执行后不会销毁
    - 将线程放回线程池重复利用
## 为什么需要使用线程池
    - 线程是稀缺资源，不应该频繁创建和销毁
    - 架构解耦，线程穿件和业务处理解耦，更加优雅
    - 线程池是使用线程的最佳实践
    - 阿里java手册会强制使用线程池：线程资源必须通过线程池提供，不允许在应用中自行显式创建线程。
        - 使用线程池的好处是减少在创建和销毁线程上所花的时间以及系统资源的开销，解决资源不足的问题。如果不使用线程池，有可能造成系统创建大量同类线程而导致消耗完内存或者“过度切换”问题。

# 实现任务处理线程ProcessThread
    - 任务处理线程需要不断的从任务队列里取任务执行
    - 任务处理线程需要有一个标记，标记线程什么时候应该停止
## 实现任务处理线程
    - 基本属性（任务队列，标记）
    - 线程执行的逻辑（run）
    - 线程停止（stop）

# 任务处理线程池Pool
    - 存放多个任务处理线程
    - 负责多个线程的启停
    - 管理向线程池的提交任务，下发给线程去执行
## 实现任务处理线程池
    - 基本属性
    - 提交任务的函数（put, batch_put)
    - 线程启停（start、join）
    - 线程池大小（size）

## 实现异步任务处理AsyncTask
    - 不知道任务什么时候执行
    - 不知道任务什么时候完成
        - 给任务一个标记，任务完成后，则标记为完成
        - 任务完成时，可直接获取任务运行结果
        - 任务未完成时，获取任务结果，会阻塞获取线程

#### 利用条件变量来实现

### 实现AsyncTask
    - 设置运行结果（set_result)
    - 获取运行结果（get_result）